import editDistance from "./editDistance";
import axios from "axios";
console.clear();

const fs = require('fs');
const Trie = require('./TrieStructure').default;

// const words = {};
// const data = JSON.parse('{"t":{"h":{"e":{"end":1,"y":{"end":20},"r":{"e":{"end":41}},"i":{"r":{"end":53}},"n":{"end":60},"m":{"end":61},"s":{"e":{"end":66}}},"a":{"t":{"end":10},"n":{"end":91,"k":{"end":911}}},"i":{"s":{"end":25},"n":{"g":{"end":70},"k":{"end":133},"end":825},"r":{"d":{"end":614}},"c":{"k":{"end":797}}},"r":{"o":{"u":{"g":{"h":{"end":128}}},"w":{"end":883}},"e":{"e":{"end":153}}},"o":{"u":{"g":{"h":{"t":{"end":226},"end":311}},"s":{"a":{"n":{"d":{"end":480}}}}},"s":{"e":{"end":266}}},"u":{"s":{"end":790}}},"o":{"end":3,"o":{"end":148,"k":{"end":280},"l":{"end":942}},"g":{"e":{"t":{"h":{"e":{"r":{"end":253}}}}}},"l":{"d":{"end":343}},"p":{"end":347},"w":{"a":{"r":{"d":{"end":380}}},"n":{"end":403}},"n":{"e":{"end":716}},"u":{"c":{"h":{"end":728}}},"t":{"a":{"l":{"end":943}}}},"i":{"m":{"e":{"end":54}},"r":{"e":{"end":492}},"n":{"y":{"end":682}},"e":{"end":833}},"w":{"o":{"end":73},"e":{"n":{"t":{"y":{"end":695}}}}},"a":{"k":{"e":{"end":105}},"l":{"k":{"end":313},"l":{"end":636}},"b":{"l":{"e":{"end":372}}},"i":{"l":{"end":447}}},"u":{"r":{"n":{"end":139}},"b":{"e":{"end":819}}},"e":{"l":{"l":{"end":150}},"n":{"end":376},"a":{"c":{"h":{"end":430}},"m":{"end":732}},"s":{"t":{"end":469}},"m":{"p":{"e":{"r":{"a":{"t":{"u":{"r":{"e":{"end":640}}}}}}}}},"r":{"m":{"end":862}},"e":{"t":{"h":{"end":998}}}},"r":{"y":{"end":189},"e":{"e":{"end":228}},"u":{"e":{"end":355},"c":{"k":{"end":876}}},"a":{"v":{"e":{"l":{"end":373}}},"i":{"n":{"end":558}},"d":{"e":{"end":700}},"c":{"k":{"end":952}}},"i":{"p":{"end":702},"a":{"n":{"g":{"l":{"e":{"end":826}}}}}},"o":{"u":{"b":{"l":{"e":{"end":711}}}}}},"y":{"p":{"e":{"end":629}}}},"o":{"f":{"end":2,"f":{"end":185,"i":{"c":{"e":{"end":703}}},"e":{"r":{"end":973}}},"t":{"e":{"n":{"end":269}}}},"n":{"end":14,"e":{"end":23},"l":{"y":{"end":114}},"c":{"e":{"end":290}}},"r":{"end":27,"d":{"e":{"r":{"end":338}}},"g":{"a":{"n":{"end":673}}},"i":{"g":{"i":{"n":{"a":{"l":{"end":965}}}}}}},"u":{"t":{"end":37},"r":{"end":124}},"t":{"h":{"e":{"r":{"end":38}}}},"v":{"e":{"r":{"end":88}}},"l":{"d":{"end":147}},"w":{"n":{"end":203}},"p":{"e":{"n":{"end":251},"r":{"a":{"t":{"e":{"end":800}}}}},"p":{"o":{"s":{"i":{"t":{"e":{"end":863}}}}}}},"h":{"end":435},"c":{"e":{"a":{"n":{"end":438}}},"c":{"u":{"r":{"end":986}}}},"b":{"j":{"e":{"c":{"t":{"end":460}}}},"s":{"e":{"r":{"v":{"e":{"end":664}}}}}},"i":{"l":{"end":726}},"x":{"y":{"g":{"e":{"n":{"end":901}}}}}},"a":{"n":{"d":{"end":4},"end":48,"y":{"end":101},"i":{"m":{"a":{"l":{"end":192}}}},"s":{"w":{"e":{"r":{"end":208}}}},"g":{"e":{"r":{"end":898}}}},"end":5,"r":{"e":{"end":15,"a":{"end":335}},"m":{"end":513},"t":{"end":539},"r":{"a":{"n":{"g":{"e":{"end":868}}}},"i":{"v":{"e":{"end":950}}}}},"s":{"end":17,"k":{"end":179}},"t":{"end":22,"o":{"m":{"end":771}}},"l":{"l":{"end":40,"o":{"w":{"end":841}}},"s":{"o":{"end":157}},"w":{"a":{"y":{"s":{"end":264}}}}},"b":{"o":{"u":{"t":{"end":58}},"v":{"e":{"end":307}}},"l":{"e":{"end":422}}},"f":{"t":{"e":{"r":{"end":111}}},"r":{"a":{"i":{"d":{"end":917}}}}},"i":{"r":{"end":155}},"d":{"d":{"end":168}},"c":{"t":{"end":177}},"g":{"a":{"i":{"n":{"end":191,"s":{"t":{"end":383}}}}},"o":{"end":481},"e":{"end":675},"r":{"e":{"e":{"end":789}}}},"p":{"p":{"e":{"a":{"r":{"end":391}}},"l":{"e":{"end":927}}}},"m":{"o":{"n":{"g":{"end":500}}},"end":507}},"i":{"n":{"end":6,"t":{"e":{"r":{"e":{"s":{"t":{"end":365}}}}}},"c":{"h":{"end":451},"l":{"u":{"d":{"e":{"end":527}}}}},"s":{"t":{"r":{"u":{"m":{"e":{"n":{"t":{"end":575}}}}}},"a":{"n":{"t":{"end":977}}}},"e":{"c":{"t":{"end":765}}}},"d":{"u":{"s":{"t":{"r":{"y":{"end":642}}}}},"i":{"c":{"a":{"t":{"e":{"end":768}}}}}},"v":{"e":{"n":{"t":{"end":870}}}}},"s":{"end":7,"l":{"a":{"n":{"d":{"end":465}}}}},"t":{"end":8},"end":18,"f":{"end":55},"d":{"e":{"a":{"end":286}}},"c":{"e":{"end":523}},"r":{"o":{"n":{"end":691}}},"m":{"a":{"g":{"i":{"n":{"e":{"end":787}}}}}}},"y":{"o":{"u":{"end":9,"r":{"end":45},"n":{"g":{"end":305}}}},"e":{"a":{"r":{"end":117}},"s":{"end":494},"t":{"end":503},"l":{"l":{"o":{"w":{"end":839}}}}},"a":{"r":{"d":{"end":722}}}},"h":{"e":{"end":11,"r":{"end":67,"e":{"end":171}},"l":{"p":{"end":135},"d":{"end":616}},"a":{"d":{"end":201},"r":{"end":292,"d":{"end":351},"t":{"end":506}},"t":{"end":490},"v":{"y":{"end":509}}}},"i":{"s":{"end":19,"t":{"o":{"r":{"y":{"end":773}}}}},"m":{"end":72},"g":{"h":{"end":174}},"l":{"l":{"end":624}},"t":{"end":780}},"a":{"v":{"e":{"end":24}},"d":{"end":28},"s":{"end":74},"n":{"d":{"end":164}},"r":{"d":{"end":231}},"p":{"p":{"e":{"n":{"end":332}},"y":{"end":594}}},"l":{"f":{"end":336}},"i":{"r":{"end":617}},"t":{"end":853}},"o":{"t":{"end":487},"w":{"end":46},"m":{"e":{"end":162}},"u":{"s":{"e":{"end":187}},"r":{"end":353}},"r":{"s":{"e":{"end":293}}},"l":{"d":{"end":362},"e":{"end":699}},"p":{"e":{"end":595}}},"u":{"n":{"d":{"r":{"e":{"d":{"end":357}}}},"t":{"end":543}},"m":{"a":{"n":{"end":772}}},"r":{"r":{"y":{"end":828}}},"g":{"e":{"end":918}}}},"w":{"a":{"s":{"end":12,"h":{"end":807}},"y":{"end":57},"t":{"e":{"r":{"end":90}},"c":{"h":{"end":296}}},"n":{"t":{"end":154}},"l":{"k":{"end":259},"l":{"end":564}},"r":{"end":381,"m":{"end":439}},"i":{"t":{"end":413}},"v":{"e":{"end":504}}},"i":{"t":{"h":{"end":16}},"l":{"l":{"end":56},"d":{"end":574}},"n":{"d":{"end":330,"o":{"w":{"end":555}}},"t":{"e":{"r":{"end":571}}},"g":{"end":804},"end":937},"d":{"e":{"end":514}},"s":{"h":{"end":567}},"r":{"e":{"end":733}},"f":{"e":{"end":864}}},"o":{"r":{"d":{"end":31},"k":{"end":103},"l":{"d":{"end":195}}},"u":{"l":{"d":{"end":63}}},"o":{"d":{"end":299}},"n":{"d":{"e":{"r":{"end":478}}},"\'":{"t":{"end":792}}},"m":{"a":{"n":{"end":752}},"e":{"n":{"end":906}}}},"h":{"a":{"t":{"end":33}},"e":{"n":{"end":42},"r":{"e":{"end":110}},"e":{"l":{"end":456}},"t":{"h":{"e":{"r":{"end":610}}}}},"i":{"c":{"h":{"end":51}},"l":{"e":{"end":243}},"t":{"e":{"end":255}}},"o":{"end":94,"l":{"e":{"end":348}},"s":{"e":{"end":761}}},"y":{"end":178}},"e":{"end":35,"r":{"e":{"end":39}},"l":{"l":{"end":156}},"n":{"t":{"end":182}},"s":{"t":{"end":363}},"e":{"k":{"end":431}},"i":{"g":{"h":{"t":{"end":521}}}},"a":{"t":{"h":{"e":{"r":{"end":589}}}},"r":{"end":737}}},"r":{"i":{"t":{"e":{"end":62},"t":{"e":{"n":{"end":573}}}}},"o":{"t":{"e":{"end":714}},"n":{"g":{"end":889}}}}},"f":{"o":{"r":{"end":13,"m":{"end":130},"c":{"e":{"end":458}},"e":{"s":{"t":{"end":552}}},"w":{"a":{"r":{"d":{"end":922}}}}},"l":{"l":{"o":{"w":{"end":176}}}},"u":{"n":{"d":{"end":207}},"r":{"end":218}},"o":{"d":{"end":216},"t":{"end":466}}},"r":{"o":{"m":{"end":26},"n":{"t":{"end":429}}},"i":{"e":{"n":{"d":{"end":284}}}},"e":{"e":{"end":440},"s":{"h":{"end":836}}},"a":{"c":{"t":{"i":{"o":{"n":{"end":551}}}}}},"u":{"i":{"t":{"end":795}}}},"i":{"r":{"s":{"t":{"end":93}},"e":{"end":339}},"n":{"d":{"end":100},"e":{"end":404},"a":{"l":{"end":432}},"i":{"s":{"h":{"end":593}}},"g":{"e":{"r":{"end":641}}}},"s":{"h":{"end":287}},"v":{"e":{"end":358}},"g":{"u":{"r":{"e":{"end":415}}},"h":{"t":{"end":644}},"end":916},"e":{"l":{"d":{"end":419}}},"l":{"l":{"end":496}},"t":{"end":743}},"a":{"t":{"h":{"e":{"r":{"end":200}}},"end":963},"r":{"m":{"end":230},"end":236},"c":{"e":{"end":298},"t":{"end":449}},"m":{"i":{"l":{"y":{"end":318}}},"o":{"u":{"s":{"end":820}}}},"s":{"t":{"end":367}},"l":{"l":{"end":407}},"i":{"r":{"end":745}},"v":{"o":{"r":{"end":958}}}},"e":{"w":{"end":249},"e":{"t":{"end":275},"l":{"end":312},"d":{"end":941}},"l":{"t":{"end":530},"l":{"end":742}},"a":{"r":{"end":823}}},"l":{"y":{"end":406},"o":{"w":{"e":{"r":{"end":596}},"end":744},"o":{"r":{"end":620}}},"a":{"t":{"end":694}}},"u":{"l":{"l":{"end":457}},"n":{"end":586}}},"b":{"e":{"end":21,"e":{"n":{"end":98}},"f":{"o":{"r":{"e":{"end":143}}}},"t":{"w":{"e":{"e":{"n":{"end":219}}}},"t":{"e":{"r":{"end":354}}}},"g":{"i":{"n":{"end":257}},"a":{"n":{"end":285}}},"s":{"t":{"end":352}},"a":{"u":{"t":{"y":{"end":425}}},"r":{"end":592},"t":{"end":646}},"h":{"i":{"n":{"d":{"end":445}}}},"d":{"end":545},"l":{"i":{"e":{"v":{"e":{"end":550}}}},"l":{"end":815}}},"y":{"end":29},"u":{"t":{"end":32},"i":{"l":{"d":{"end":197}}},"s":{"y":{"end":468}},"y":{"end":606},"r":{"n":{"end":623}}},"a":{"c":{"k":{"end":112}},"s":{"e":{"end":291},"i":{"c":{"end":944}}},"l":{"l":{"end":502}},"b":{"y":{"end":601}},"d":{"end":724},"n":{"k":{"end":746},"d":{"end":934}},"t":{"end":808},"r":{"end":972}},"o":{"y":{"end":146},"t":{"h":{"end":267},"t":{"o":{"m":{"end":689}}}},"o":{"k":{"end":278}},"d":{"y":{"end":316}},"x":{"end":417},"a":{"t":{"end":471},"r":{"d":{"end":569}}},"n":{"e":{"end":785}},"r":{"n":{"end":872}},"u":{"g":{"h":{"t":{"end":928}}}}},"i":{"g":{"end":173},"r":{"d":{"end":314}},"t":{"end":631}},"l":{"a":{"c":{"k":{"end":326}}},"u":{"e":{"end":459}},"o":{"w":{"end":725},"o":{"d":{"end":727}},"c":{"k":{"end":851}}}},"r":{"o":{"u":{"g":{"h":{"t":{"end":489}}}},"t":{"h":{"e":{"r":{"end":546}}}},"k":{"e":{"end":654}},"w":{"n":{"end":736}},"a":{"d":{"end":893}}},"i":{"n":{"g":{"end":493}},"g":{"h":{"t":{"end":587}}}},"e":{"a":{"k":{"end":720},"d":{"end":969}}},"a":{"n":{"c":{"h":{"end":912}}}}}},"s":{"o":{"m":{"e":{"end":34}},"end":65,"u":{"n":{"d":{"end":83}},"t":{"h":{"end":340}}},"o":{"n":{"end":315}},"n":{"g":{"end":322},"end":658},"f":{"t":{"end":585}},"l":{"v":{"e":{"end":608}},"d":{"i":{"e":{"r":{"end":798}}}},"u":{"t":{"i":{"o":{"n":{"end":908}}}}}},"i":{"l":{"end":638}}},"a":{"i":{"d":{"end":47},"l":{"end":515}},"y":{"end":134},"m":{"e":{"end":149}},"w":{"end":235},"t":{"end":572},"f":{"e":{"end":625}},"n":{"d":{"end":637}},"v":{"e":{"end":748}},"l":{"t":{"end":895}}},"h":{"e":{"end":50,"e":{"t":{"end":956}},"l":{"l":{"end":999}}},"o":{"w":{"end":119},"u":{"l":{"d":{"end":205,"e":{"r":{"end":866}}}},"t":{"end":712}},"r":{"t":{"end":327},"e":{"end":954}},"e":{"end":865},"p":{"end":881}},"i":{"p":{"end":334},"n":{"e":{"end":884}}},"a":{"p":{"e":{"end":485}},"l":{"l":{"end":615}},"r":{"p":{"end":803},"e":{"end":966}}}},"e":{"e":{"end":71,"m":{"end":252},"d":{"end":715}},"n":{"t":{"e":{"n":{"c":{"e":{"end":131}}}},"end":740},"s":{"e":{"end":650}},"d":{"end":838}},"t":{"end":152,"t":{"l":{"e":{"end":519}}}},"l":{"f":{"end":198},"l":{"end":854},"e":{"c":{"t":{"end":888}}}},"a":{"end":237,"r":{"c":{"h":{"end":837}}},"s":{"o":{"n":{"end":907}}},"t":{"end":949}},"c":{"o":{"n":{"d":{"end":277}}},"t":{"i":{"o":{"n":{"end":676}}}}},"v":{"e":{"r":{"a":{"l":{"end":378}}},"n":{"end":612}}},"r":{"v":{"e":{"end":390}}},"p":{"a":{"r":{"a":{"t":{"e":{"end":755}}}}}},"g":{"m":{"e":{"n":{"t":{"end":974}}}}}},"i":{"d":{"e":{"end":97}},"n":{"c":{"e":{"end":346}},"g":{"end":369,"l":{"e":{"end":692}}}},"x":{"end":371},"m":{"p":{"l":{"e":{"end":377}}},"i":{"l":{"a":{"r":{"end":923}}}}},"z":{"e":{"end":517}},"t":{"end":553},"g":{"n":{"end":582},"h":{"t":{"end":824}}},"l":{"e":{"n":{"t":{"end":635}}},"v":{"e":{"r":{"end":910}}}},"s":{"t":{"e":{"r":{"end":919}}}}},"m":{"a":{"l":{"l":{"end":159}}},"i":{"l":{"e":{"end":697}}},"e":{"l":{"l":{"end":945}}}},"p":{"e":{"l":{"l":{"end":167}},"c":{"i":{"a":{"l":{"end":443}}}},"a":{"k":{"end":520}},"e":{"d":{"end":671},"c":{"h":{"end":988}}},"n":{"d":{"end":961}}},"a":{"c":{"e":{"end":350}}},"r":{"i":{"n":{"g":{"end":663}}},"e":{"a":{"d":{"end":867}}}},"o":{"k":{"e":{"end":770}},"t":{"end":844}}},"u":{"c":{"h":{"end":175},"c":{"e":{"s":{"s":{"end":855}}}}},"n":{"end":217},"r":{"e":{"end":295},"f":{"a":{"c":{"e":{"end":462}}}},"p":{"r":{"i":{"s":{"e":{"end":679}}}}}},"d":{"d":{"e":{"n":{"end":533}}}},"b":{"j":{"e":{"c":{"t":{"end":540}}}},"t":{"r":{"a":{"c":{"t":{"end":857}}}}},"s":{"t":{"a":{"n":{"c":{"e":{"end":957}}}}}}},"m":{"m":{"e":{"r":{"end":557}}}},"g":{"g":{"e":{"s":{"t":{"end":718}}}},"a":{"r":{"end":902}}},"p":{"p":{"l":{"y":{"end":784}},"o":{"r":{"t":{"end":987}}}}},"i":{"t":{"end":846}},"f":{"f":{"i":{"x":{"end":914}}}}},"t":{"a":{"n":{"d":{"end":202}},"t":{"e":{"end":220},"i":{"o":{"n":{"end":967}}}},"r":{"t":{"end":232},"end":416},"y":{"end":455}},"u":{"d":{"y":{"end":211},"e":{"n":{"t":{"end":781}}}}},"i":{"l":{"l":{"end":212}},"c":{"k":{"end":693}}},"o":{"r":{"y":{"end":234},"e":{"end":556}},"p":{"end":289},"o":{"d":{"end":427}},"n":{"e":{"end":681}}},"e":{"p":{"end":360},"a":{"d":{"end":476},"m":{"end":991}},"e":{"l":{"end":920}}},"r":{"o":{"n":{"g":{"end":442}}},"e":{"e":{"t":{"end":450}},"a":{"m":{"end":822}},"t":{"c":{"h":{"end":882}}}},"a":{"n":{"g":{"e":{"end":598}}},"i":{"g":{"h":{"t":{"end":666}}}}},"i":{"n":{"g":{"end":814}}}}},"c":{"h":{"o":{"o":{"l":{"end":209}}}},"i":{"e":{"n":{"c":{"e":{"end":281}}}}},"a":{"l":{"e":{"end":661}}},"o":{"r":{"e":{"end":926}}}},"l":{"o":{"w":{"end":385}},"e":{"e":{"p":{"end":559}}},"i":{"p":{"end":936}},"a":{"v":{"e":{"end":975}}}},"y":{"s":{"t":{"e":{"m":{"end":467}}}},"l":{"l":{"a":{"b":{"l":{"e":{"end":529}}}}}},"m":{"b":{"o":{"l":{"end":708}}}}},"n":{"o":{"w":{"end":491}}},"q":{"u":{"a":{"r":{"e":{"end":535}}}}},"k":{"y":{"end":568},"i":{"n":{"end":696},"l":{"l":{"end":905}}}},"w":{"i":{"m":{"end":861}}}},"c":{"a":{"n":{"end":36},"l":{"l":{"end":92}},"m":{"e":{"end":118},"p":{"end":869}},"u":{"s":{"e":{"end":140}},"g":{"h":{"t":{"end":766}}}},"r":{"end":274,"e":{"end":276},"r":{"y":{"end":279}},"d":{"end":933}},"t":{"c":{"h":{"end":565}},"end":626},"s":{"e":{"end":655}},"p":{"t":{"a":{"i":{"n":{"end":753}}}},"i":{"t":{"a":{"l":{"end":791}}}}}},"o":{"u":{"l":{"d":{"end":78}},"n":{"t":{"r":{"y":{"end":206}},"end":534}},"r":{"s":{"e":{"end":454}}}},"m":{"e":{"end":80},"p":{"l":{"e":{"t":{"e":{"end":333}}}},"a":{"r":{"e":{"end":812}},"n":{"y":{"end":856}}}},"m":{"o":{"n":{"end":472}}}},"v":{"e":{"r":{"end":215}}},"l":{"o":{"r":{"end":297},"n":{"y":{"end":830}}},"d":{"end":398},"l":{"e":{"c":{"t":{"end":747}}}},"u":{"m":{"n":{"end":886}}}},"r":{"r":{"e":{"c":{"t":{"end":421}}}},"n":{"e":{"r":{"end":782}},"end":811}},"n":{"t":{"a":{"i":{"n":{"end":428}}},"r":{"o":{"l":{"end":749}}},"i":{"n":{"u":{"e":{"end":850}},"e":{"n":{"t":{"end":900}}}}}},"s":{"i":{"d":{"e":{"r":{"end":628}}}},"o":{"n":{"a":{"n":{"t":{"end":667}}}}}},"d":{"i":{"t":{"i":{"o":{"n":{"end":940}}}}}},"n":{"e":{"c":{"t":{"end":959}}}}},"w":{"end":579},"o":{"k":{"end":619},"l":{"end":684}},"a":{"s":{"t":{"end":632}},"t":{"end":931}},"p":{"y":{"end":633}},"s":{"t":{"end":734}},"t":{"t":{"o":{"n":{"end":871}}}}},"h":{"a":{"n":{"g":{"e":{"end":181}},"c":{"e":{"end":879}}},"r":{"a":{"c":{"t":{"e":{"r":{"end":764}}}}},"t":{"end":852},"g":{"e":{"end":970}}},"i":{"r":{"end":793}}},"i":{"l":{"d":{"r":{"e":{"n":{"end":256}}},"end":665}},"e":{"f":{"end":829}},"c":{"k":{"end":981}}},"e":{"c":{"k":{"end":483}}},"o":{"o":{"s":{"e":{"end":741}}},"r":{"d":{"end":962}}}},"i":{"t":{"y":{"end":227}},"r":{"c":{"l":{"e":{"end":525}}}}},"r":{"o":{"s":{"s":{"end":229}},"p":{"end":777},"w":{"d":{"end":810}}},"y":{"end":409},"e":{"a":{"s":{"e":{"end":698}},"t":{"e":{"end":805}}}}},"l":{"o":{"s":{"e":{"end":245}},"t":{"h":{"e":{"end":597}}},"u":{"d":{"end":678}},"c":{"k":{"end":831}}},"a":{"s":{"s":{"end":329}},"i":{"m":{"end":899}}},"e":{"a":{"r":{"end":446},"n":{"end":719}}},"i":{"m":{"b":{"end":683}}}},"u":{"t":{"end":294},"r":{"r":{"e":{"n":{"t":{"end":847}}}}}},"e":{"n":{"t":{"e":{"r":{"end":386}},"u":{"r":{"y":{"end":627}}},"end":730}},"r":{"t":{"a":{"i":{"n":{"end":405}}}}},"l":{"l":{"end":549}}}},"u":{"p":{"end":43},"s":{"e":{"end":44},"end":190,"u":{"a":{"l":{"end":304}}}},"n":{"d":{"e":{"r":{"end":125}}},"t":{"i":{"l":{"end":271}}},"i":{"t":{"end":401}}}},"e":{"a":{"c":{"h":{"end":49}},"r":{"t":{"h":{"end":199}},"l":{"y":{"end":361}},"end":651},"s":{"e":{"end":261},"t":{"end":497}},"t":{"end":282}},"v":{"e":{"r":{"y":{"end":120},"end":308},"n":{"end":169,"t":{"end":858},"i":{"n":{"g":{"end":939}}}}}},"n":{"d":{"end":160},"o":{"u":{"g":{"h":{"end":301}}}},"g":{"i":{"n":{"e":{"end":511}}}},"e":{"r":{"g":{"y":{"end":542}}},"m":{"y":{"end":983}}},"t":{"e":{"r":{"end":834}}}},"y":{"e":{"end":222}},"x":{"a":{"m":{"p":{"l":{"e":{"end":260}}}},"c":{"t":{"end":707}}},"e":{"r":{"c":{"i":{"s":{"e":{"end":563}}}}}},"c":{"i":{"t":{"e":{"end":647}}},"e":{"p":{"t":{"end":713}}}},"p":{"e":{"r":{"i":{"m":{"e":{"n":{"t":{"end":688}}}},"e":{"n":{"c":{"e":{"end":925}}}}}},"c":{"t":{"end":776}}}}},"q":{"u":{"a":{"t":{"e":{"end":486}},"l":{"end":739}}}},"g":{"g":{"end":547}},"d":{"g":{"e":{"end":581}}},"i":{"g":{"h":{"t":{"end":602}}},"t":{"h":{"e":{"r":{"end":621}}}}},"l":{"s":{"e":{"end":652}},"e":{"c":{"t":{"r":{"i":{"c":{"end":775}}}}},"m":{"e":{"n":{"t":{"end":779}}}}}},"f":{"f":{"e":{"c":{"t":{"end":774}}}}},"s":{"p":{"e":{"c":{"i":{"a":{"l":{"l":{"y":{"end":915}}}}}}}}}},"d":{"o":{"end":52,"w":{"n":{"end":96}},"e":{"s":{"end":151}},"n":{"\'":{"t":{"end":242}},"e":{"end":424}},"g":{"end":317},"o":{"r":{"end":324}},"c":{"t":{"o":{"r":{"end":757}}}},"l":{"l":{"a":{"r":{"end":821}}}},"u":{"b":{"l":{"e":{"end":948}}}}},"a":{"y":{"end":77},"r":{"k":{"end":410}},"n":{"c":{"e":{"end":510}},"g":{"e":{"r":{"end":794}}}},"d":{"end":968}},"i":{"d":{"end":81},"f":{"f":{"e":{"r":{"end":138}},"i":{"c":{"u":{"l":{"t":{"end":756}}}}}}},"r":{"e":{"c":{"t":{"end":319}}}},"s":{"t":{"a":{"n":{"t":{"end":495}}}},"c":{"u":{"s":{"s":{"end":921}}}}},"v":{"i":{"d":{"e":{"end":528}},"s":{"i":{"o":{"n":{"end":955}}}}}},"c":{"t":{"i":{"o":{"n":{"a":{"r":{"y":{"end":669}}}}}}}},"e":{"end":709}},"r":{"a":{"w":{"end":238}},"i":{"v":{"e":{"end":426}},"n":{"k":{"end":985}}},"y":{"end":477},"o":{"p":{"end":505}},"e":{"s":{"s":{"end":677}},"a":{"m":{"end":938}}}},"u":{"r":{"i":{"n":{"g":{"end":356}}}},"c":{"k":{"end":976}}},"e":{"v":{"e":{"l":{"o":{"p":{"end":437}}}}},"c":{"i":{"d":{"e":{"end":461}},"m":{"a":{"l":{"end":750}}}}},"e":{"p":{"end":463}},"s":{"c":{"r":{"i":{"b":{"e":{"end":618}}}}},"i":{"g":{"n":{"end":685}}},"e":{"r":{"t":{"end":845}}}},"p":{"e":{"n":{"d":{"end":816}}}},"a":{"d":{"end":843},"l":{"end":860},"t":{"h":{"end":903}},"r":{"end":982}},"t":{"e":{"r":{"m":{"i":{"n":{"e":{"end":873}}}}}}},"g":{"r":{"e":{"e":{"end":979}}}}}},"m":{"a":{"n":{"y":{"end":59},"end":116},"k":{"e":{"end":69}},"y":{"end":95},"d":{"e":{"end":108}},"r":{"k":{"end":268,"e":{"t":{"end":978}}}},"i":{"n":{"end":300}},"p":{"end":393},"c":{"h":{"i":{"n":{"e":{"end":411}}}}},"t":{"e":{"r":{"i":{"a":{"l":{"end":516}}}}},"t":{"e":{"r":{"end":524}}},"c":{"h":{"end":913}}},"j":{"o":{"r":{"end":835}}},"g":{"n":{"e":{"t":{"end":909}}}},"s":{"s":{"end":932},"t":{"e":{"r":{"end":951}}}}},"o":{"r":{"e":{"end":76},"n":{"i":{"n":{"g":{"end":375}}}}},"s":{"t":{"end":85}},"v":{"e":{"end":144}},"t":{"h":{"e":{"r":{"end":194}}},"i":{"o":{"n":{"end":992}}}},"u":{"n":{"t":{"a":{"i":{"n":{"end":288}}},"end":566}},"t":{"h":{"end":706}}},"n":{"e":{"y":{"end":389}},"t":{"h":{"end":590}}},"o":{"n":{"end":464}},"m":{"e":{"n":{"t":{"end":660}}}},"d":{"e":{"r":{"n":{"end":778}}}},"l":{"e":{"c":{"u":{"l":{"e":{"end":887}}}}}}},"y":{"end":87},"e":{"end":122,"a":{"n":{"end":142,"t":{"end":996}},"s":{"u":{"r":{"e":{"end":323}}}},"t":{"end":817}},"n":{"end":180},"e":{"t":{"end":604}},"t":{"a":{"l":{"end":609}},"h":{"o":{"d":{"end":672}}}},"l":{"o":{"d":{"y":{"end":701}}}}},"u":{"c":{"h":{"end":141}},"s":{"t":{"end":172},"i":{"c":{"end":265}}},"l":{"t":{"i":{"p":{"l":{"y":{"end":452}}}}}}},"i":{"g":{"h":{"t":{"end":233}}},"l":{"e":{"end":272},"l":{"i":{"o":{"n":{"end":591}}}},"k":{"end":670}},"n":{"u":{"t":{"e":{"end":441}}},"d":{"end":444},"e":{"end":832}},"s":{"s":{"end":488}},"d":{"d":{"l":{"e":{"end":656}}}},"x":{"end":731}}},"l":{"i":{"k":{"e":{"end":64}},"v":{"e":{"end":109}},"t":{"t":{"l":{"e":{"end":113}}}},"n":{"e":{"end":137}},"g":{"h":{"t":{"end":183}}},"f":{"e":{"end":248},"t":{"end":848}},"s":{"t":{"end":310,"e":{"n":{"end":370}}}},"e":{"end":645},"q":{"u":{"i":{"d":{"end":994}}}}},"o":{"n":{"g":{"end":68},"e":{"end":561}},"o":{"k":{"end":75}},"w":{"end":136},"v":{"e":{"end":387}},"u":{"d":{"end":662}},"t":{"end":687},"s":{"t":{"end":735}},"c":{"a":{"t":{"e":{"end":762}}}},"g":{"end":995}},"a":{"r":{"g":{"e":{"end":166}}},"n":{"d":{"end":170},"g":{"u":{"a":{"g":{"e":{"end":499}}}}}},"s":{"t":{"end":224}},"t":{"e":{"end":240}},"y":{"end":382},"u":{"g":{"h":{"end":479}}},"w":{"end":630},"k":{"e":{"end":659}},"d":{"y":{"end":721}}},"e":{"a":{"r":{"n":{"end":213}},"v":{"e":{"end":321}},"d":{"end":408},"s":{"t":{"end":710}}},"t":{"end":225,"t":{"e":{"r":{"end":270}}}},"f":{"t":{"end":239}},"s":{"s":{"end":374}},"n":{"g":{"t":{"h":{"end":537}}}},"g":{"end":562},"v":{"e":{"l":{"end":878}}},"d":{"end":929}}},"g":{"o":{"end":79,"o":{"d":{"end":121}},"t":{"end":258},"v":{"e":{"r":{"n":{"end":396}}}},"l":{"d":{"end":473}},"n":{"e":{"end":599}}},"e":{"t":{"end":106},"n":{"e":{"r":{"a":{"l":{"end":522}}}},"t":{"l":{"e":{"end":751}}}}},"i":{"v":{"e":{"end":123}},"r":{"l":{"end":303}}},"r":{"e":{"a":{"t":{"end":132}},"e":{"n":{"end":434}},"w":{"end":729}},"o":{"w":{"end":210},"u":{"p":{"end":263},"n":{"d":{"end":364}}}},"a":{"n":{"d":{"end":501}},"s":{"s":{"end":578}},"y":{"end":890}}},"a":{"v":{"e":{"end":433}},"m":{"e":{"end":484}},"s":{"end":588},"r":{"d":{"e":{"n":{"end":738}}}},"t":{"h":{"e":{"r":{"end":880}}}}},"l":{"a":{"s":{"s":{"end":577}},"d":{"end":964}}},"u":{"e":{"s":{"s":{"end":801}}},"n":{"end":840},"i":{"d":{"e":{"end":924}}}}},"n":{"u":{"m":{"b":{"e":{"r":{"end":82}}},"e":{"r":{"a":{"l":{"end":328}}}}}},"o":{"end":84,"w":{"end":99},"r":{"t":{"h":{"end":250}},"end":947},"t":{"i":{"c":{"e":{"end":399}}},"e":{"end":412},"h":{"i":{"n":{"g":{"end":453}}}}},"u":{"n":{"end":418}},"o":{"n":{"end":760}},"i":{"s":{"e":{"end":877}}},"s":{"e":{"end":896}}},"e":{"w":{"end":102},"e":{"d":{"end":186}},"a":{"r":{"end":196}},"v":{"e":{"r":{"end":223}}},"x":{"t":{"end":254}},"c":{"e":{"s":{"s":{"a":{"r":{"y":{"end":802}}}}}},"k":{"end":1000}},"i":{"g":{"h":{"b":{"o":{"r":{"end":806}}}}}}},"a":{"m":{"e":{"end":126}},"t":{"u":{"r":{"a":{"l":{"end":648}},"e":{"end":989}}},"i":{"o":{"n":{"end":668}}}}},"i":{"g":{"h":{"t":{"end":246}}},"n":{"e":{"end":875}}}},"p":{"e":{"o":{"p":{"l":{"e":{"end":86}}}},"r":{"s":{"o":{"n":{"end":388}}},"h":{"a":{"p":{"s":{"end":531}}}},"i":{"o":{"d":{"end":767}}}}},"a":{"r":{"t":{"end":104,"y":{"end":783},"i":{"c":{"u":{"l":{"a":{"r":{"end":859}}}}}}},"a":{"g":{"r":{"a":{"p":{"h":{"end":613}}}}}},"e":{"n":{"t":{"end":953}}}},"g":{"e":{"end":204}},"p":{"e":{"r":{"end":262}}},"s":{"s":{"end":345},"t":{"end":584}},"t":{"t":{"e":{"r":{"n":{"end":384}}}},"h":{"end":993}},"i":{"n":{"t":{"end":498}},"r":{"end":526}},"y":{"end":674}},"l":{"a":{"c":{"e":{"end":107}},"y":{"end":158},"n":{"t":{"end":214},"end":414,"e":{"end":475,"t":{"end":827}}},"i":{"n":{"end":302}}},"e":{"a":{"s":{"e":{"end":758}}}},"u":{"r":{"a":{"l":{"end":897}}}}},"u":{"t":{"end":161},"l":{"l":{"end":397}},"s":{"h":{"end":611}}},"o":{"r":{"t":{"end":165}},"i":{"n":{"t":{"end":193}}},"s":{"e":{"end":320},"s":{"i":{"b":{"l":{"e":{"end":474}}}}},"i":{"t":{"i":{"o":{"n":{"end":512}}}}},"t":{"end":960}},"w":{"e":{"r":{"end":402}}},"u":{"n":{"d":{"end":423}}},"o":{"r":{"end":686}},"e":{"m":{"end":813}},"p":{"u":{"l":{"a":{"t":{"e":{"end":980}}}}}}},"i":{"c":{"t":{"u":{"r":{"e":{"end":188}}}},"k":{"end":532}},"e":{"c":{"e":{"end":342}}},"t":{"c":{"h":{"end":930}}}},"r":{"e":{"s":{"s":{"end":244},"e":{"n":{"t":{"end":508}}}},"p":{"a":{"r":{"e":{"end":894}}}},"t":{"t":{"y":{"end":904}}}},"o":{"d":{"u":{"c":{"t":{"end":325},"e":{"end":448}}}},"b":{"l":{"e":{"m":{"end":341}}},"a":{"b":{"l":{"e":{"end":544}}}}},"v":{"e":{"end":560},"i":{"d":{"e":{"end":788}}}},"t":{"e":{"c":{"t":{"end":759}}}},"c":{"e":{"s":{"s":{"end":799}}}},"p":{"e":{"r":{"t":{"y":{"end":885}},"end":971}}}},"a":{"c":{"t":{"i":{"c":{"e":{"end":754}}}}}},"i":{"n":{"t":{"end":842}}}},"h":{"r":{"a":{"s":{"e":{"end":634}}}}}},"k":{"n":{"o":{"w":{"end":89}},"e":{"w":{"end":344}}},"i":{"n":{"d":{"end":184},"g":{"end":349}},"l":{"l":{"end":657}}},"e":{"e":{"p":{"end":221}},"p":{"t":{"end":576}},"y":{"end":690}}},"r":{"o":{"u":{"n":{"d":{"end":115}}},"o":{"m":{"end":283},"t":{"end":605}},"c":{"k":{"end":337}},"a":{"d":{"end":392}},"l":{"l":{"end":639}},"w":{"end":705},"s":{"e":{"end":849}},"p":{"e":{"end":935}}},"i":{"g":{"h":{"t":{"end":145}}},"v":{"e":{"r":{"end":273}}},"d":{"e":{"end":548}},"s":{"e":{"end":723}},"n":{"g":{"end":763}},"c":{"h":{"end":796}}},"e":{"a":{"d":{"end":163,"y":{"end":306}},"l":{"end":247},"c":{"h":{"end":366}},"s":{"o":{"n":{"end":536}}}},"d":{"end":309},"m":{"e":{"m":{"b":{"e":{"r":{"end":359}}}}}},"s":{"t":{"end":420},"u":{"l":{"t":{"end":622}}}},"c":{"o":{"r":{"d":{"end":470}}},"e":{"i":{"v":{"e":{"end":704}}}}},"p":{"r":{"e":{"s":{"e":{"n":{"t":{"end":538}}}}}},"e":{"a":{"t":{"end":891}}},"l":{"y":{"end":984}}},"g":{"i":{"o":{"n":{"end":541}}}},"q":{"u":{"i":{"r":{"e":{"end":892}}}}}},"u":{"n":{"end":241},"l":{"e":{"end":395}},"b":{"end":818}},"a":{"i":{"n":{"end":394},"s":{"e":{"end":607}},"l":{"end":786}},"n":{"end":482,"g":{"e":{"end":990}}},"c":{"e":{"end":554}},"d":{"i":{"o":{"end":769}}},"t":{"h":{"e":{"r":{"end":809}}}}}},"v":{"e":{"r":{"y":{"end":127},"b":{"end":368}}},"o":{"w":{"e":{"l":{"end":379}}},"i":{"c":{"e":{"end":400}}}},"a":{"r":{"y":{"end":518}},"l":{"u":{"e":{"end":643}},"l":{"e":{"y":{"end":946}}}}},"i":{"s":{"i":{"t":{"end":583}}},"l":{"l":{"a":{"g":{"e":{"end":603}}}}},"e":{"w":{"end":649}}}},"j":{"u":{"s":{"t":{"end":129}},"m":{"p":{"end":600}}},"o":{"y":{"end":570},"b":{"end":580},"i":{"n":{"end":717}}}},"q":{"u":{"e":{"s":{"t":{"i":{"o":{"n":{"end":331}}}}}},"i":{"c":{"k":{"end":436}},"t":{"e":{"end":653}},"e":{"t":{"end":680}}},"a":{"r":{"t":{"end":874}}},"o":{"t":{"i":{"e":{"n":{"t":{"end":997}}}}}}}}}');
//
//
// function parse(node, str = ''){
//   if(node.end){
//     words[str] = node.end;
//   }
//
//   for(let chr in node){
//     if(chr === 'end') continue;
//
//     parse(node[chr], str + chr)
//   }
// }
//
// parse(data, '')
//
// console.log(words)
//
// fs.writeFileSync('words.json', JSON.stringify(words));
//
// process.exit()

const trie = new Trie;
trie.tree = JSON.parse(fs.readFileSync('trie.json'));

class Node{
  constructor(value){
    this.value = value;
    this.children = {};
  }
}

class BKTree{
  insert(word){
    if(this.tree === undefined){
      this.tree = new Node(word)
      return this;
    }

    let node = this.tree;
    let distance, exists;

    do{
      distance = editDistance(word, node.value);
      exists = node.children[distance] !== undefined;
      if(exists) node = node.children[distance];
    }while (exists);

    node.children[distance] = new Node(word);
    return this;
  }

  *find(word, tolerance = 2){
    const stack = [];
    if(this.tree !== undefined) {
      stack.push(this.tree);
    }

    while(stack.length){
      const node = stack.pop();
      const distance = editDistance(node.value, word);

      if(distance <= tolerance){
        yield {
          ...node,
          distance
        };
      }

      for(const d of Object.keys(node.children)){
        if(d > distance - tolerance && d < distance + tolerance){
          stack.push(node.children[d]);
        }
      }
    }
  }
}


const bkTree = new BKTree;
bkTree.tree = JSON.parse(fs.readFileSync('bktree_terms.json'))
// for(const node of trie.traverse()){
//   if(!node.isEnd) continue;
//   if(node.value.match(/[0-9_]/)) continue;
//
//   bkTree.insert(node.value)
// }
// fs.writeFileSync('bktree_terms.json', JSON.stringify(bkTree.tree));


function shuffleArray(array) {
  for (var i = array.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
  return array;
}

let wordsObj = JSON.parse(fs.readFileSync('words.json'));
let words = Object.keys(wordsObj)/*.sort((a, b) => a[1]  - b[1])*/
// console.log(words)
// process.exit()

// for(let word of shuffleArray(words)){
//   bkTree.insert(word);
// }

console.log('BKTrie created');
// console.log(JSON.stringify(bkTree.tree, null, 2))


const target = 'babe';
let suggestedWords = [...bkTree.find(target, 2)]
  .sort((a, b) => a.distance - b.distance);
suggestedWords = suggestedWords.filter(word => word.distance === suggestedWords[0].distance)
  .map(word => ({
    ...word,
    place: wordsObj[word.value]
  }))
  // .sort((a, b) => a.place - b.place);
  .sort((a, b) => Math.abs(target.length - a.length) - Math.abs(target.length - b.place));

for(let word of suggestedWords){
  console.log(word.value, `(distance=${word.distance} place=${word.place})`)
  // console.log(word.value, word.distance)
}